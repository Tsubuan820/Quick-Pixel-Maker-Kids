<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Dot-Notion-Kids</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ドットえエディタ</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,'Hiragino Sans',sans-serif;background:#fff;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}
.c{background:#fff;border-radius:20px;padding:30px;width:100%;max-width:500px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
.ctrl{margin-bottom:20px}
.row{display:flex;gap:10px;margin-bottom:10px;align-items:center;justify-content:center}
.cp-w{display:flex;gap:6px;align-items:center}
.cp{width:44px;height:44px;border:3px solid #e0e0e0;border-radius:10px;cursor:pointer;transition:border-color .2s}
.cp:hover{border-color:#667eea}
.cp-label{font-size:13px;font-weight:bold;color:#666}
.tb{flex:1;padding:12px 8px;font-size:13px;font-weight:bold;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;background:#fff;color:#444;transition:all .2s;text-align:center;white-space:nowrap}
.tb:hover{border-color:#667eea;background:#f5f7ff}
.tb.active{background:#667eea;color:#fff;border-color:#667eea}
.tb:disabled{opacity:.3;cursor:not-allowed}
.tb:disabled:hover{border-color:#e0e0e0;background:#fff}
.cw{margin-bottom:20px;display:flex;justify-content:center}
.pc{display:inline-grid;grid-template-columns:repeat(16,1fr);gap:1px;background:#ddd;padding:1px;border-radius:8px;user-select:none;touch-action:none}
.px{width:20px;height:20px;background-image:linear-gradient(45deg,#f0f0f0 25%,transparent 25%,transparent 75%,#f0f0f0 75%),linear-gradient(45deg,#f0f0f0 25%,transparent 25%,transparent 75%,#f0f0f0 75%);background-size:10px 10px;background-position:0 0,5px 5px;background-color:#fff;cursor:crosshair;transition:border-color .15s,filter .15s,transform .15s;border:2px solid transparent;outline:none}
.px:hover{border-color:#667eea;filter:brightness(.9);transform:scale(1.05)}
.ab{display:flex;gap:10px}
.ub,.rb{flex:.5;padding:12px;font-size:16px;font-weight:bold;border:2px solid #e0e0e0;border-radius:12px;cursor:pointer;background:#fff;color:#444;transition:all .2s}
.ub:hover:not(:disabled),.rb:hover:not(:disabled){border-color:#667eea;background:#f5f7ff;transform:translateY(-1px)}
.ub:disabled,.rb:disabled{opacity:.3;cursor:not-allowed}
.cb{flex:.6;padding:12px;font-size:14px;font-weight:bold;border:2px solid #d1d5db;border-radius:12px;cursor:pointer;background:#fff;color:#6b7280;transition:all .2s}
.cb:hover{border-color:#9ca3af;background:#f9fafb;transform:translateY(-1px)}
.cpb{flex:1.4;padding:15px;font-size:16px;font-weight:bold;border:none;border-radius:12px;cursor:pointer;color:#fff;background:linear-gradient(135deg,#667eea,#a78bfa);box-shadow:0 4px 15px rgba(102,126,234,.4);transition:all .2s}
.cpb:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(102,126,234,.6)}
.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.8);z-index:1000;align-items:center;justify-content:center;padding:20px}
.modal-c{background:#fff;border-radius:20px;padding:30px;max-width:600px;width:100%;text-align:center}
.modal-c img{width:256px;height:256px;image-rendering:pixelated;border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.2);margin:20px 0}
.modal-c h3{margin-bottom:10px;color:#667eea;font-size:20px}
.modal-c p{color:#6b7280;margin-bottom:20px;line-height:1.6;font-size:14px}
.modal-c .hint{background:#f8f8f8;padding:15px;border-radius:12px;margin-bottom:20px;font-size:14px;color:#888;line-height:1.6}
.close-btn{padding:12px 30px;font-size:14px;font-weight:bold;border:none;border-radius:12px;cursor:pointer;color:#fff;background:#667eea;transition:all .2s}
.close-btn:hover{background:#5568d3;transform:translateY(-1px)}
@media(max-width:600px){.c{padding:20px}.px{width:16px;height:16px;background-size:8px 8px;background-position:0 0,4px 4px}.modal-c img{width:200px;height:200px}.tb{padding:10px 6px;font-size:12px}.cp{width:38px;height:38px}.cp-label{font-size:11px}}
</style>
</head>
<body>
<div class="c">
<div class="ctrl">
<div class="row">
<div class="cp-w">
<input type="color" id="cp" class="cp" value="#000000">
<span class="cp-label">いろ</span>
</div>
<button class="tb active" id="pb" onclick="st('pen')">えんぴつ</button>
<button class="tb" id="eb" onclick="st('eraser')">けしゴム</button>
<button class="tb" id="fb" onclick="st('fill')">ぬりつぶし</button>
</div>
</div>
<div class="cw"><div class="pc" id="cv"></div></div>
<div class="ab">
<button class="ub" id="ub" onclick="undo()" disabled>←</button>
<button class="rb" id="rb" onclick="redo()" disabled>→</button>
<button class="cb" onclick="clr()">クリア</button>
<button class="cpb" onclick="prev()">できた！</button>
</div>
</div>
<div class="modal" id="modal" onclick="closeModal()">
<div class="modal-c" onclick="event.stopPropagation()">
<h3>できたよ！</h3>
<img id="img">
<div class="hint">
スマホ：えを <strong>ながおし</strong> → 「しゃしんにほぞん」<br>
パソコン：えを <strong>みぎクリック</strong> → 「がぞうをコピー」
</div>
<p>Notionにはりつけてつかってね！</p>
<button class="close-btn" onclick="closeModal()">とじる</button>
</div>
</div>
<script>
const cv=document.getElementById('cv'),cp=document.getElementById('cp'),pb=document.getElementById('pb'),eb=document.getElementById('eb'),fb=document.getElementById('fb'),ub=document.getElementById('ub'),rb=document.getElementById('rb'),modal=document.getElementById('modal'),img=document.getElementById('img');
let px=[],dr=false,t='pen',h=[],hi=-1;
function init(){for(let i=0;i<256;i++){const p=document.createElement('div');p.className='px';p.dataset.i=i;p.dataset.c='';p.onmousedown=e=>{e.preventDefault();if(t=='fill'){ff(p);sv()}else{dr=true;d(p)}};p.onmouseenter=()=>{if(dr&&t!='fill')d(p)};p.onmouseup=()=>sp();p.ontouchstart=e=>{e.preventDefault();if(t=='fill'){ff(p);sv()}else{dr=true;d(p)}};p.ontouchmove=e=>{if(dr&&t!='fill'){const touch=e.touches[0];const el=document.elementFromPoint(touch.clientX,touch.clientY);if(el&&el.classList.contains('px'))d(el)}};p.ontouchend=()=>sp();cv.appendChild(p);px.push(p)}document.onmouseup=()=>sp();sv()}
function sv(){const s=px.map(p=>p.dataset.c||'').join(',');if(hi<h.length-1)h=h.slice(0,hi+1);if(h[hi]!==s){h.push(s);hi=h.length-1}ub.disabled=hi<=0;rb.disabled=hi>=h.length-1}
function ld(s){s.split(',').forEach((c,i)=>{px[i].dataset.c=c;if(c){px[i].style.backgroundColor='#'+c;px[i].style.backgroundImage='none'}else{px[i].style.backgroundColor='#fff';px[i].style.backgroundImage='linear-gradient(45deg,#f0f0f0 25%,transparent 25%,transparent 75%,#f0f0f0 75%),linear-gradient(45deg,#f0f0f0 25%,transparent 25%,transparent 75%,#f0f0f0 75%)'}})}
function undo(){if(hi>0){hi--;ld(h[hi]);ub.disabled=hi<=0;rb.disabled=false}}
function redo(){if(hi<h.length-1){hi++;ld(h[hi]);ub.disabled=hi<=0;rb.disabled=hi>=h.length-1}}
function st(m){t=m;pb.classList.toggle('active',m=='pen');eb.classList.toggle('active',m=='eraser');fb.classList.toggle('active',m=='fill')}
function d(p){if(t=='eraser'){p.dataset.c='';p.style.backgroundColor='#fff';p.style.backgroundImage='linear-gradient(45deg,#f0f0f0 25%,transparent 25%,transparent 75%,#f0f0f0 75%),linear-gradient(45deg,#f0f0f0 25%,transparent 25%,transparent 75%,#f0f0f0 75%)'}else{const c=cp.value.slice(1);p.dataset.c=c;p.style.backgroundColor='#'+c;p.style.backgroundImage='none'}}
function sp(){if(dr){dr=false;sv()}}
function ff(start){const tc=start.dataset.c||'',nc=cp.value.slice(1);if(tc===nc)return;const q=[parseInt(start.dataset.i)],v=new Set();while(q.length){const i=q.shift();if(v.has(i)||i<0||i>255)continue;v.add(i);const pc=px[i].dataset.c||'';if(pc!==tc)continue;px[i].dataset.c=nc;px[i].style.backgroundColor='#'+nc;px[i].style.backgroundImage='none';const x=i%16,y=Math.floor(i/16);if(x>0)q.push(i-1);if(x<15)q.push(i+1);if(y>0)q.push(i-16);if(y<15)q.push(i+16)}}
function clr(){px.forEach(p=>{p.dataset.c='';p.style.backgroundColor='#fff';p.style.backgroundImage='linear-gradient(45deg,#f0f0f0 25%,transparent 25%,transparent 75%,#f0f0f0 75%),linear-gradient(45deg,#f0f0f0 25%,transparent 25%,transparent 75%,#f0f0f0 75%)'});sv()}
function prev(){const can=document.createElement('canvas');can.width=512;can.height=512;const ctx=can.getContext('2d');px.forEach((p,i)=>{const x=(i%16)*32,y=Math.floor(i/16)*32;if(p.dataset.c){ctx.fillStyle='#'+p.dataset.c;ctx.fillRect(x,y,32,32)}});img.src=can.toDataURL('image/png');modal.style.display='flex'}
function closeModal(){modal.style.display='none'}
init();
</script>
</body>
</html>
    
  </body>
  
</html>
